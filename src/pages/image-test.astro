---
import ImageGallery from '../components/ImageGallery';
import { Image } from 'astro:assets';
import BaseLayout from '../layouts/BaseLayout.astro';
import { generateImgxUrl } from '../utils/imgxUtils';
---

<BaseLayout title="Image Optimization Test">
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-4xl font-bold mb-8">Image Optimization Test</h1>

    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-4">Responsive Image Component</h2>
      <Image
        src={generateImgxUrl('/images/sample-post-1.svg', 800, 450)}
        alt="Sample Post Image"
        class="w-full max-w-md rounded-lg shadow-lg"
        loading="eager"
        width={800} // Provide a default width
        height={450} // Provide a default height (16/9 aspect ratio)
      />
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-4">Optimized Image Component</h2>
      <Image
        src={generateImgxUrl('/images/sample-project-1.svg', 400, 300)}
        alt="Sample Project Image"
        width={400}
        height={300}
        class="rounded-lg shadow-lg"
        loading="lazy"
      />
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-4">Image Gallery Component</h2>
      <ImageGallery
        images={[
          '/images/sample-post-1.svg',
          '/images/sample-project-1.svg',
          '/images/profile-pic.svg',
          '/images/placeholder.svg'
        ]}
        title="Sample Gallery"
        lazy={true}
        client:load
      />
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-4">Image Optimization Stats</h2>
      <div class="bg-base-200 p-6 rounded-lg">
        <h3 class="text-lg font-semibold mb-2">Features Implemented:</h3>
        <ul class="list-disc list-inside space-y-2">
          <li>✅ Responsive image component with multiple breakpoints</li>
          <li>✅ Optimized image component with quality control</li>
          <li>✅ Lazy loading for gallery images</li>
          <li>✅ Image gallery with lightbox functionality</li>
          <li>✅ Placeholder images for missing content</li>
          <li>✅ Image path normalization utilities</li>
          <li>✅ SVG placeholder generation</li>
          <li>✅ Image analysis and optimization scripts</li>
        </ul>
      </div>
    </section>
  </div>
</BaseLayout>