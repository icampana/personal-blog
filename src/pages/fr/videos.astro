---
import { getCollection } from 'astro:content';
import VideoCard from '../../components/VideoCard.astro';
import BlogLayout from '../../layouts/BlogLayout.astro';
import { getLanguageFromFilename } from '../../utils/i18n';

const allVideos = await getCollection('videos');
const videos = allVideos
    .filter(video => getLanguageFromFilename(video.id) === 'fr')
    .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());

const title = 'Mes Vidéos';
const description = 'Une sélection de mes vidéos YouTube sur le développement, la technologie et plus encore.';
---

<BlogLayout title={title} description={description} locale="fr">
    <div class='max-w-7xl mx-auto px-6 py-12'>
        <header class='mb-12 text-center'>
            <h1
                class='text-4xl font-bold tracking-tight text-base-content md:text-5xl mb-4'>
                {title}
            </h1>
            <p class='text-xl text-base-content/80 max-w-2xl mx-auto'>
                {description}
            </p>
        </header>

        {
            videos.length > 0 ? (
                <div class='grid gap-8 sm:grid-cols-2 lg:grid-cols-3'>
                    {videos.map((video) => (
                        <VideoCard
                            title={video.data.title}
                            videoId={video.data.videoId}
                            date={video.data.date}
                            description={video.data.description}
                            featured={video.data.featured}
                        />
                    ))}
                </div>
            ) : (
                <div class='text-center py-12'>
                    <p class='text-lg text-base-content/60'>
                        Aucune vidéo publiée pour le moment. Plus de contenu à venir !
                    </p>
                </div>
            )
        }
    </div>
</BlogLayout>
