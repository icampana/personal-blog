---
import { getCollection } from 'astro:content';
import SearchComponent from './SearchComponent';
import ThemeToggle from './ThemeToggle';
import MobileMenu from './MobileMenu';

// Get all pages for navigation
const pages = await getCollection('pages');

const menuItems = [
  { url: '/', title: 'HOME' },
  { url: '/portafolio', title: 'PORTFOLIO' },
  { url: '/archivo', title: 'ARCHIVE' },
  ...pages.map((page) => ({
    url: page.data.path ? `/content${page.data.path}` : `/content/${page.slug}`,
    title: page.data.title,
  })),
];

const siteTitle = 'IVÃN GABRIEL';
---

<nav class="sticky top-0 z-50 bg-[#0a0a0c]/80 backdrop-blur-md border-b border-[#1e1e24]">
  <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
    <div class="flex items-center space-x-2">
      <div class="w-3 h-3 rounded-full bg-[var(--accent-neon)]"></div>
      <span class="mono font-bold tracking-tighter text-xl">{siteTitle}</span>
    </div>
    <div class="hidden md:flex items-center space-x-8">
      {menuItems.map((item) => (
        <a class="mono text-sm font-medium hover:text-[var(--accent-neon)] transition-colors" href={item.url}>
          {item.title}
        </a>
      ))}
    </div>
    <div class="flex items-center space-x-4">
      <MobileMenu client:load menuItems={menuItems} />
      <SearchComponent client:load />
      <ThemeToggle client:load />
    </div>
  </div>
</nav>